---
interface Props {
  variant?: "dots" | "diagonal-stripes" | "grid" | "horizontal-lines" | "vertical-lines" | "checkerboard";
  mask?: "fade-center" | "fade-edges" | "fade-top" | "fade-bottom" | "fade-left" | "fade-right" | "fade-x" | "fade-y" | "none";
  size?: number;
  fill?: string;
  class?: string;
}

const {
  variant = "grid",
  mask = "none",
  size = 24,
  fill = "#252525",
  class: className
} = Astro.props;

const maskClasses = {
  "fade-edges": "[mask-image:radial-gradient(ellipse_at_center,white,transparent)]",
  "fade-center": "[mask-image:radial-gradient(ellipse_at_center,transparent,white)]",
  "fade-top": "[mask-image:linear-gradient(to_bottom,transparent,white)]",
  "fade-bottom": "[mask-image:linear-gradient(to_bottom,white,transparent)]",
  "fade-left": "[mask-image:linear-gradient(to_right,transparent,white)]",
  "fade-right": "[mask-image:linear-gradient(to_right,white,transparent)]",
  "fade-x": "[mask-image:linear-gradient(to_right,transparent,white,transparent)]",
  "fade-y": "[mask-image:linear-gradient(to_bottom,transparent,white,transparent)]",
  "none": "",
};

function getBgImage(variant: string, fill: string, size: number) {
  switch (variant) {
    case "dots":
      return `radial-gradient(${fill} 1px, transparent 1px)`;
    case "grid":
      return `linear-gradient(to right, ${fill} 1px, transparent 1px), linear-gradient(to bottom, ${fill} 1px, transparent 1px)`;
    case "diagonal-stripes":
      return `repeating-linear-gradient(45deg, ${fill}, ${fill} 1px, transparent 1px, transparent ${size}px)`;
    case "horizontal-lines":
      return `linear-gradient(to bottom, ${fill} 1px, transparent 1px)`;
    case "vertical-lines":
      return `linear-gradient(to right, ${fill} 1px, transparent 1px)`;
    case "checkerboard":
      return `linear-gradient(45deg, ${fill} 25%, transparent 25%), linear-gradient(-45deg, ${fill} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${fill} 75%), linear-gradient(-45deg, transparent 75%, ${fill} 75%)`;
    default:
      return undefined;
  }
}

const bgSize = `${size}px ${size}px`;
const backgroundImage = getBgImage(variant, fill, size);
const maskClass = maskClasses[mask as keyof typeof maskClasses] || "";
---

<div
  class={`absolute inset-0 z-[-10] size-full ${maskClass} ${className || ''}`}
  style={{
    backgroundImage,
    backgroundSize: bgSize,
  }}
></div>